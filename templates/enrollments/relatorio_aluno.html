<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Histórico Escolar - {{ student.nome }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h3>Histórico do Aluno</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <p><strong>Nome:</strong> {{ student.nome }}</p>
                    <p><strong>Email:</strong> {{ student.email }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong>CPF:</strong> {{ student.cpf }}</p>
                    <p><strong>Data de Ingresso:</strong> {{ student.data_ingresso|date:"d/m/Y" }}</p>
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-4 text-center">
        <div class="col-md-4">
            <div class="card bg-light">
                <div class="card-body">
                    <h5>Total Cursos</h5>
                    <h2>{{ total_cursos }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-success text-white">
                <div class="card-body">
                    <h5>Total Pago</h5>
                    <h2>R$ {{ total_investido }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-danger text-white">
                <div class="card-body">
                    <h5>Total Pendente</h5>
                    <h2>R$ {{ total_pendente }}</h2>
                </div>
            </div>
        </div>
    </div>

    <h4>Detalhamento de Matrículas</h4>
    <table class="table table-striped mt-3">
        <thead>
            <tr>
                <th>Curso</th>
                <th>Data Matrícula</th>
                <th>Valor</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for item in enrollments %}
            <tr>
                <td>{{ item.curso.nome }}</td>
                <td>{{ item.data_matricula|date:"d/m/Y" }}</td>
                <td>R$ {{ item.curso.valor_inscricao }}</td>
                <td>
                    {% if item.status == 'PAGO' %}
                        <span class="badge bg-success">Pago</span>
                    {% else %}
                        <span class="badge bg-warning text-dark">Pendente</span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="4">Nenhuma matrícula encontrada.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
